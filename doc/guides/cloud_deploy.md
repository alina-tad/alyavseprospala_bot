# Облачное развертывание бота (Docker + GitHub)

## Рекомендованные бесплатные/условно-бесплатные провайдеры

- Railway.app — простой, поддерживает Docker, автодеплой из GitHub, быстрый старт (рекомендуется для MVP)
- Fly.io — гибкий, бесплатный стартовый тариф, но настройка сложнее
- Koyeb — простой PaaS с поддержкой Docker и GitHub
- Render — удобный, есть фри-тир, но иногда слип на простое
- Google Cloud Run — надёжно, но сложнее в настройке, потребует GCP аккаунт

Для KISS и быстрого запуска — выбираем Railway.

---

## Инструкция по деплою на Railway (Docker)

Требования:
- Репозиторий на GitHub
- Dockerfile в корне проекта (уже есть)
- Файл `.env` (локальный) — для переноса переменных в Railway

Шаги:
1. Зарегистрируйтесь/войдите на Railway (`https://railway.app`).
2. Нажмите "New Project" → "Deploy from GitHub repo" → выберите ваш репозиторий.
3. Railway обнаружит Dockerfile. Выберите деплой через Docker.
4. В Settings проекта:
   - Variables → добавьте переменные окружения:
     - `TELEGRAM_BOT_TOKEN`
     - `OPENROUTER_API_KEY`
     - `LLM_MODEL` (например, `gpt-4` или ваш primary)
     - `LOG_LEVEL` (например, `INFO`)
     - `ADMIN_USER_ID` (ваш Telegram id для /stats, /export, /clear)
5. В разделе Deployments включите авто-деплой из main (по желанию).
6. Нажмите "Deploy".
7. После старта откройте Logs — вы увидите строки:
   - "Бот инициализирован..."
   - "Start polling" — значит бот запущен и слушает обновления.

Примечания:
- Порт не требуется (бот работает по polling).
- Хранилище: по умолчанию Railway не сохраняет локальные файлы между рестартами. Рекомендуется:
  - Либо жить без сохранения истории между перезапусками (MVP)
  - Либо прикрутить Volume (платный) или позже перейти на внешний storage

---

## Альтернативы (кратко)

- Fly.io: `fly launch` → генерируется fly.toml, затем `fly deploy`. Нужны переменные в `fly secrets set ...`.
- Koyeb: подключение GitHub, выбрать Docker deploy, прописать env variables.
- Cloud Run: собрать образ в GCR/Artifact Registry, задеплоить сервис, настроить сервис-аккаунт.

---

## Трюки и отладка
- Если бот не отвечает: проверьте токен, логи, лимиты OpenRouter.
- Переменные окружения: убедитесь, что заданы в Railway Variables.
- Для быстрого hotfix: вручную перезапустите деплой.
